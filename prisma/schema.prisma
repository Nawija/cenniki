generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model ProductOverride {
    id           String @id @default(cuid())
    manufacturer String // np. "befame", "bomar"
    category     String // np. "narożniki", "sofy"
    productName  String // np. "BELAVIO NAROŻNIK SET 1"

    // Opcjonalne nadpisania
    customName         String? // Nowa nazwa produktu (jeśli chcesz zmienić)
    priceFactor        Float    @default(1.0) // Mnożnik cen (np. 1.1 = +10%, 0.9 = -10%)
    discount           Int? // Procent rabatu (np. 20 = -20%), null = brak promocji
    customPrice        Decimal? @db.Decimal(10, 2) // Bezpośrednia edycja ceny (nadpisuje factor i discount)
    customPreviousName String? // Edycja poprzedniej nazwy produktu
    customImage        String? // Ścieżka do nowego zdjęcia np. /images/befame/nazwa.webp

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@unique([manufacturer, category, productName])
    @@index([manufacturer])
    @@index([manufacturer, category])
}
